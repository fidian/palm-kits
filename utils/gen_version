#!/bin/bash
#
# Generates a version.h file based on a .rcp file
#
# Copyright (C) 2002-2003 - Kit development team
# Licensed under the GNU GPL software license.
# See the docs/LEGAL file for more information
# See http://kits.sourceforge.net/ for more information about the library
#
# $Id$

BASENAME=$1
UCBASE=`echo $BASENAME|tr a-z A-Z`

if [ "x$BASENAME" == "x" ]; then {
   echo "Specify a base name of a .rcp file to use."
   exit;
}; fi;

echo "/* Do not edit this file directly!            */"
echo "/* This is generated by 'util/gen_version.sh' */"
echo "/* Edit .rcp instead.                    */"
echo "#define APP_VERSION" \
   \"`grep "VERSION ID " ${BASENAME}.rcp | cut -f 2 -d \"`\"
echo "#define ${UCBASE}_MAJOR_VERSION" \
   `grep "VERSION ID " ${BASENAME}.rcp | cut -f 2 -d \" | cut -f 1 -d .`
echo "#define ${UCBASE}_MINOR_VERSION" \
   `grep "VERSION ID " ${BASENAME}.rcp | cut -f 2 -d \" | cut -f 2 -d . \
   | cut -f 1 -d '-' `
echo "#define COMPILE_DATE" \"`date +"%B %e, %Y at %k:%M" | tr -s ' '`\"
